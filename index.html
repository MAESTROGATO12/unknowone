<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>REPETICIÓN</title>

<style>
body{
  margin:0;
  background:#0b0b10;
  color:#e5e7eb;
  font-family:system-ui, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

#game{
  width:700px;
  max-width:90%;
  background:#12121a;
  padding:40px;
  border-radius:16px;
  box-shadow:0 0 60px rgba(0,0,0,.6);
}

h1{
  font-size:1.4rem;
  letter-spacing:3px;
  margin-bottom:20px;
}

#text{
  white-space:pre-line;
  font-size:1.05rem;
  line-height:1.6;
  margin-bottom:30px;
}

.choice{
  display:block;
  width:100%;
  background:#1f2937;
  border:none;
  color:#e5e7eb;
  padding:14px;
  margin-bottom:12px;
  border-radius:10px;
  cursor:pointer;
  text-align:left;
}

.choice:hover{
  background:#374151;
}
</style>
</head>

<body>

<div id="game">
  <h1 id="title"></h1>
  <div id="text"></div>
  <div id="choices"></div>
</div>

<script>
const state = {
  rutina:0,
  curiosidad:0,
  culpa:0
};

const scenes = {

inicio:{
  title:"DÍA 1",
  text:"El despertador suena.\n\nNo recuerdas haber soñado.\nNo recuerdas haber descansado.\n\nPero te levantas igual.",
  choices:[
    {text:"Levantarte", next:"casa"},
    {text:"Quedarte un minuto más", next:"casa", effect:()=>state.rutina++}
  ]
},

casa:{
  title:"Casa",
  text:"Todo está en su sitio.\nDemasiado.\n\nEl calendario marca hoy.\nNo hay nada escrito.",
  choices:[
    {text:"Salir al trabajo", next:"camino"},
    {text:"Mirar el calendario", next:"calendario", effect:()=>state.curiosidad++}
  ]
},

calendario:{
  title:"Calendario",
  text:"Por un segundo crees ver una fecha marcada.\n\nParpadeas.\n\nYa no está.",
  choices:[
    {text:"Ignorarlo", next:"camino", effect:()=>state.rutina++},
    {text:"Pensarlo demasiado", next:"camino", effect:()=>state.culpa++}
  ]
},

camino:{
  title:"Camino",
  text:"El trayecto es siempre igual.\n\nLas mismas personas.\nLas mismas caras.\n\nUna te resulta familiar.",
  choices:[
    {text:"Desviar la mirada", next:"oficina", effect:()=>state.rutina++},
    {text:"Mirar de vuelta", next:"mirada", effect:()=>state.curiosidad++}
  ]
},

mirada:{
  title:"Contacto",
  text:"La persona aparta la vista.\n\nPero sonríe.\n\nComo si supiera algo que tú no.",
  choices:[
    {text:"Seguir caminando", next:"oficina"},
  ]
},

oficina:{
  title:"Oficina",
  text:"Enciendes el ordenador.\n\nTu nombre ya está escrito.\n\nNo recuerdas haber iniciado sesión.",
  choices:[
    {text:"Trabajar", next:"correo"},
    {text:"Revisar archivos", next:"archivo", effect:()=>state.curiosidad++}
  ]
},

archivo:{
  title:"Archivo",
  text:"Un archivo sin fecha.\n\nSolo una frase:\n\n“Prometiste no olvidar.”",
  choices:[
    {text:"Cerrar", next:"correo", effect:()=>state.culpa++},
    {text:"Buscar más", next:"bloqueado", effect:()=>state.curiosidad++}
  ]
},

bloqueado:{
  title:"Acceso",
  text:"El sistema pide una contraseña.\n\nTus dedos dudan.\n\nNo recuerdas, pero sientes que deberías.",
  choices:[
    {text:"Intentarlo", next:"error"},
    {text:"Rendirse", next:"correo", effect:()=>state.rutina++}
  ]
},

error:{
  title:"Error",
  text:"Contraseña incorrecta.\n\nEl sistema responde:\n\n“Lo sabías.”",
  choices:[
    {text:"Cerrar todo", next:"correo"}
  ]
},

correo:{
  title:"Correo",
  text:"Nuevo mensaje.\n\nRemitente: Tú.\n\nAsunto:\n“ACTO 2”",
  choices:[
    {text:"Abrir", next:"acto2"},
    {text:"Apagar el ordenador", next:"final_rutina"}
  ]
},

/* ================= ACTO 2 ================= */

acto2:{
  title:"ACTO 2",
  text:"Si estás leyendo esto es porque ya dudaste.\n\nEmpiezas a recordar pequeños detalles.\n\nErrores.\n\nDecisiones que evitaste.",
  choices:[
    {text:"Seguir leyendo", next:"recuerdos", effect:()=>state.curiosidad++},
    {text:"Cerrar el mensaje", next:"negacion", effect:()=>state.rutina++}
  ]
},

negacion:{
  title:"Negación",
  text:"Vuelves a trabajar.\n\nPero todo se siente falso.\n\nComo una repetición mal hecha.",
  choices:[
    {text:"Continuar", next:"acto3", effect:()=>state.culpa++}
  ]
},

recuerdos:{
  title:"Recuerdos",
  text:"Recuerdas haber tomado una decisión.\n\nNo fue grande.\n\nSolo fue más fácil mirar a otro lado.",
  choices:[
    {text:"Aceptar que pasó", next:"acto3", effect:()=>state.curiosidad++},
    {text:"Convencerte de que no importa", next:"acto3", effect:()=>state.rutina++}
  ]
},

/* ================= ACTO 3 ================= */

acto3:{
  title:"ACTO 3",
  text:"Ahora lo entiendes.\n\nNo estás atrapado.\n\nElegiste no avanzar.",
  choices:[
    {text:"Aceptar lo ocurrido", next:"final_aceptacion"},
    {text:"Seguir igual", next:"final_rutina"},
    {text:"Intentar cambiar algo", next:"final_duda"}
  ]
},

/* ================= FINALES ================= */

final_rutina:{
  title:"FINAL: RUTINA",
  text:"El día se reinicia.\n\nTodo está en su sitio.\n\nComo siempre.\n\nFin.",
  choices:[]
},

final_duda:{
  title:"FINAL: DUDA",
  text:"Sabes que algo no está bien.\n\nPero no haces nada.\n\nTal vez mañana.\n\nFin.",
  choices:[]
},

final_aceptacion:{
  title:"FINAL: ACEPTACIÓN",
  text:"Aceptas lo ocurrido.\n\nNo puedes cambiarlo.\n\nPero puedes avanzar.\n\nPor primera vez, el día termina.\n\nFin.",
  choices:[]
}

};

let current = "inicio";

function render(){
  const s = scenes[current];
  document.getElementById("title").textContent = s.title;
  document.getElementById("text").textContent = s.text;
  const box = document.getElementById("choices");
  box.innerHTML="";
  s.choices.forEach(c=>{
    const b=document.createElement("button");
    b.className="choice";
    b.textContent=c.text;
    b.onclick=()=>{
      if(c.effect) c.effect();
      current=c.next;
      render();
    };
    box.appendChild(b);
  });
}

render();
</script>

</body>
</html>
